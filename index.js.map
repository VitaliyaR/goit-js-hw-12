{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '50344127-726c85bb6f98eba42715a8612';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\n\nexport const getImagesByQuery = async (query, page = 1) => {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: 15,\n        page: page,\n      },\n    });\n\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return {\n      hits: [],\n      totalHits: 0,\n    };\n  }\n};\n\n\nexport const setQuery = (query) => {\n  currentQuery = query;\n  currentPage = 1;\n};\n\n\nexport const getCurrentQuery = () => currentQuery;\n\n\nexport const getCurrentPage = () => currentPage;\n\n\nexport const incrementPage = () => {\n  currentPage += 1;\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\n\nexport const createGallery = (images) => {\n    const galleryContainer = document.querySelector('.gallery');\n  \n    const markup = images\n      .map(image => {\n        return `\n          <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n              <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" />\n            </a>\n            <div class=\"image-info\">\n              <div class=\"info-labels\">\n                <span>Likes</span>\n                <span>Views</span>\n                <span>Comments</span>\n                <span>Downloads</span>\n              </div>\n              <div class=\"info-values\">\n                <span>${image.likes}</span>\n                <span>${image.views}</span>\n                <span>${image.comments}</span>\n                <span>${image.downloads}</span>\n              </div>\n            </div>\n          </li>\n        `;\n      })\n      .join('');\n  \n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n  };\n  \n  export const clearGallery = () => {\n    document.querySelector('.gallery').innerHTML = '';\n  };\n  \n  export const showLoader = () => {\n    document.getElementById('loader').style.display = 'block';\n  };\n  \n  export const hideLoader = () => {\n    document.getElementById('loader').style.display = 'none';\n  };\n  \n  export const showLoadMoreButton = () => {\n    document.getElementById('load-more').style.display = 'inline-block';\n  };\n  \n  export const hideLoadMoreButton = () => {\n    document.getElementById('load-more').style.display = 'none';\n  };\n  ","import {\n    getImagesByQuery,\n    setQuery,\n    getCurrentQuery,\n    getCurrentPage,\n    incrementPage\n  } from './js/pixabay-api.js';\n  \n  import {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton\n  } from './js/render-functions.js';\n  \n  import iziToast from 'izitoast';\n  import \"izitoast/dist/css/iziToast.min.css\";\n  \n  const form = document.querySelector('.form');\n  const input = form.querySelector('input[name=\"search-text\"]');\n  const loadMoreButton = document.getElementById('load-more');\n  \n  let currentImages = [];\n  let totalHits = 0;\n  \n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n  \n    const query = input.value.trim();\n  \n    if (!query) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search term.',\n      });\n      return;\n    }\n  \n    setQuery(query);\n    showLoader();\n    clearGallery();\n  \n    try {\n      const { hits, totalHits: total } = await getImagesByQuery(query, 1);\n      currentImages = hits;\n      totalHits = total;\n  \n      if (hits.length === 0) {\n        iziToast.info({\n          title: 'No results',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        hideLoadMoreButton();\n      } else {\n        createGallery(hits);\n  \n        if (currentImages.length >= totalHits) {\n          hideLoadMoreButton();\n          iziToast.info({\n            title: 'End of Results',\n            message: \"We're sorry, but you've reached the end of search results.\",\n          });\n        } else {\n          showLoadMoreButton();\n        }\n      }\n    } catch (error) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong. Please try again.',\n      });\n    } finally {\n      hideLoader();\n    }\n  });\n  \n  loadMoreButton.addEventListener('click', async () => {\n    showLoader();\n    incrementPage();\n  \n    try {\n      const { hits: newImages } = await getImagesByQuery(getCurrentQuery(), getCurrentPage());\n  \n      if (newImages.length > 0) {\n        currentImages = [...currentImages, ...newImages];\n        createGallery(newImages);\n  \n      \n        const firstCard = document.querySelector('.gallery-item');\n        if (firstCard) {\n          const { height } = firstCard.getBoundingClientRect();\n          window.scrollBy({\n            top: height * 2,\n            behavior: 'smooth'\n          });\n        }\n      }\n  \n      if (currentImages.length >= totalHits) {\n        hideLoadMoreButton();\n        iziToast.info({\n          title: 'End of Results',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    } catch (error) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong while loading more images.',\n      });\n    } finally {\n      hideLoader();\n    }\n  });\n  "],"names":["API_KEY","currentPage","currentQuery","getImagesByQuery","query","page","response","axios","error","setQuery","getCurrentQuery","getCurrentPage","incrementPage","createGallery","images","galleryContainer","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","loadMoreButton","currentImages","totalHits","e","iziToast","hits","total","newImages","firstCard","height"],"mappings":"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"}